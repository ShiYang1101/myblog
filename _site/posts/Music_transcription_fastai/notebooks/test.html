<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Most interesting blog on Earth! â€“ test</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Most interesting blog on Earth!</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../../about.html">
 <span class="menu-text">Aetius Lee</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ShiYang1101"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com"><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/shi-yang-lee"><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">



<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> librosa</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> librosa.display</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MultiLabelBinarizer, OneHotEncoder</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> spec_generator_sequence <span class="im">import</span> _get_spec, spec_generator</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> spec_generator_sequence_multilabel <span class="im">import</span> (spec_generator_multi,</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>                                                spec_generator_multioutput)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> spec_input_generator <span class="im">import</span> gen, gen_eval</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> spectrogram_class <span class="im">import</span> spectrogram</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> classic_generator <span class="im">import</span> classic_generator</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> classic_generator <span class="im">import</span> _instrument_label_generator, get_full_path, classic_train_generator, classic_generator</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>get_full_path(<span class="st">'/train_data/2335.wav'</span>, mode<span class="op">=</span><span class="st">'train'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<pre><code>'/home/shiya/Documents/music_transcription/notebooks/../data/classic/musicnet/train_data/2335.wav'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>y, sr <span class="op">=</span> librosa.load(<span class="st">'/home/shiya/Documents/music_transcription/notebooks/../data/classic/musicnet/train_data/2335.wav'</span>, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                        sr <span class="op">=</span> <span class="dv">44100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>plt.plot(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-6-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>mel_spec <span class="op">=</span> librosa.feature.melspectrogram(y, n_mels <span class="op">=</span> <span class="dv">128</span>, sr <span class="op">=</span> <span class="dv">44100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>sns.heatmap(mel_spec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-8-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>librosa.display.specshow(mel_spec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>&lt;matplotlib.collections.QuadMesh at 0x7fa87c058e20&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-9-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>classic_generator_test <span class="op">=</span> classic_generator(batch_size <span class="op">=</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>x_list <span class="op">=</span> [path.rsplit(<span class="st">'/'</span>, <span class="dv">1</span>)[<span class="op">-</span><span class="dv">1</span>].rsplit(<span class="st">'.'</span>)[<span class="dv">0</span>] <span class="cf">for</span> path <span class="kw">in</span> classic_generator_test.x]</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>y_list <span class="op">=</span> [path.rsplit(<span class="st">'/'</span>, <span class="dv">1</span>)[<span class="op">-</span><span class="dv">1</span>].rsplit(<span class="st">'.'</span>)[<span class="dv">0</span>] <span class="cf">for</span> path <span class="kw">in</span> classic_generator_test.y]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>x_list <span class="op">==</span> y_list</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>True</code></pre>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>classic_generator_test.y[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>'/home/shiya/Documents/music_transcription/notebooks/../data/classic/musicnet/train_labels/1727.csv'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>classic_generator_test.x[<span class="dv">122</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>'/home/shiya/Documents/music_transcription/notebooks/../data/classic/musicnet/train_data/2366.wav'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># classic_train_generator('/home/shiya/Documents/music_transcription/notebooks/../data/classic/musicnet/train_data/2335.wav')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>test_classic_gen <span class="op">=</span> classic_generator_test.<span class="fu">__getitem__</span>(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>test_classic_gen[<span class="dv">0</span>][<span class="dv">0</span>].shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>(128, 200, 1)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>test_classic_gen[<span class="dv">1</span>][<span class="st">'instrument_1'</span>].shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>(1, 200, 83)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>sns.heatmap(np.squeeze(test_classic_gen[<span class="dv">0</span>][<span class="dv">0</span>], <span class="op">-</span><span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-19-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>test_classic_gen[<span class="dv">0</span>][<span class="dv">0</span>].shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>(3769, 128, 1)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>sns.heatmap(test_classic_gen[<span class="dv">1</span>][<span class="st">'1'</span>][<span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>run classic_generator</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> ger_instrument_frame(<span class="bu">file</span>, ins, num_freq, num_time):</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    _df <span class="op">=</span> pd.read_csv(<span class="bu">file</span>)</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>    _df <span class="op">=</span> _df[_df[<span class="st">'instrument'</span>] <span class="op">==</span> ins]</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    tmp_arr <span class="op">=</span> np.zeros((num_freq, num_time))</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> _df.iterrows():</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>        start_time <span class="op">=</span> i[<span class="st">'start_time'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/bin/bash: /home/shiya/anaconda3/envs/music/lib/libtinfo.so.6: no version information available (required by /bin/bash)
/home/shiya/Documents/music_transcription/notebooks</code></pre>
</div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>cwd <span class="op">=</span> os.getcwd()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>cwd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>'/home/shiya/Documents/music_transcription/notebooks'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>os.path.join(os.getcwd(), <span class="st">'/../data/classic/musicnet/train_labels/1727.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>'/../data/classic/musicnet/train_labels/1727.csv'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>librosa.get_duration(filename <span class="op">=</span> <span class="st">'../data/classic/musicnet/train_data/1727.wav'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>447.0595918367347</code></pre>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">'../data/classic/musicnet/train_labels/1727.csv'</span>.rsplit(<span class="st">'/'</span>, maxsplit<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>['../data/classic/musicnet/train_labels', '1727.csv']</code></pre>
</div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>os.path.join(<span class="st">'../data/classic/musicnet/train_labels/'</span>, </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>                <span class="st">'../train_data/'</span>, </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>                <span class="st">'1727.wav'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>'../data/classic/musicnet/train_labels/../train_data/1727.wav'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>test_inst_generator <span class="op">=</span> _instrument_label_generator(<span class="st">'../data/classic/musicnet/train_labels/1727.csv'</span>, <span class="dv">1</span>, <span class="dv">9000</span>, mode <span class="op">=</span> <span class="st">'train'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>sns.heatmap(test_inst_generator)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>&lt;AxesSubplot:&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-31-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>classic_label <span class="op">=</span> pd.read_csv(<span class="st">'../data/classic/musicnet/train_labels/1727.csv'</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>classic_label.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>start_time</th>
      <th>end_time</th>
      <th>instrument</th>
      <th>note</th>
      <th>start_beat</th>
      <th>end_beat</th>
      <th>note_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>9182</td>
      <td>90078</td>
      <td>43</td>
      <td>53</td>
      <td>4.0</td>
      <td>1.5</td>
      <td>Dotted Quarter</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9182</td>
      <td>33758</td>
      <td>42</td>
      <td>65</td>
      <td>4.0</td>
      <td>0.5</td>
      <td>Eighth</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9182</td>
      <td>62430</td>
      <td>1</td>
      <td>69</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>Quarter</td>
    </tr>
    <tr>
      <th>3</th>
      <td>9182</td>
      <td>202206</td>
      <td>44</td>
      <td>41</td>
      <td>4.0</td>
      <td>3.5</td>
      <td>Whole</td>
    </tr>
    <tr>
      <th>4</th>
      <td>9182</td>
      <td>62430</td>
      <td>1</td>
      <td>81</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>Quarter</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>classic_1_inst <span class="op">=</span> classic_label[classic_label[<span class="st">'instrument'</span>] <span class="op">==</span> <span class="dv">1</span>]</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>classic_1_inst.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>start_time</th>
      <th>end_time</th>
      <th>instrument</th>
      <th>note</th>
      <th>start_beat</th>
      <th>end_beat</th>
      <th>note_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>2</th>
      <td>9182</td>
      <td>62430</td>
      <td>1</td>
      <td>69</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>Quarter</td>
    </tr>
    <tr>
      <th>4</th>
      <td>9182</td>
      <td>62430</td>
      <td>1</td>
      <td>81</td>
      <td>4.0</td>
      <td>1.0</td>
      <td>Quarter</td>
    </tr>
    <tr>
      <th>7</th>
      <td>62430</td>
      <td>119774</td>
      <td>1</td>
      <td>84</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>Quarter</td>
    </tr>
    <tr>
      <th>8</th>
      <td>62430</td>
      <td>119774</td>
      <td>1</td>
      <td>72</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>Quarter</td>
    </tr>
    <tr>
      <th>11</th>
      <td>119774</td>
      <td>145886</td>
      <td>1</td>
      <td>74</td>
      <td>6.0</td>
      <td>0.5</td>
      <td>Eighth</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> classic_label.head(<span class="dv">2</span>).iterrows():</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(i)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="bu">type</span>(i[<span class="dv">1</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(0, start_time              9182
end_time               90078
instrument                43
note                      53
start_beat               4.0
end_beat                 1.5
note_value    Dotted Quarter
Name: 0, dtype: object)
&lt;class 'pandas.core.series.Series'&gt;
(1, start_time      9182
end_time       33758
instrument        42
note              65
start_beat       4.0
end_beat         0.5
note_value    Eighth
Name: 1, dtype: object)
&lt;class 'pandas.core.series.Series'&gt;</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>classic_spec <span class="op">=</span> spectrogram(<span class="st">'../data/classic/musicnet/train_data/1727.wav'</span>, </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>                            trunc_off<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>label_list <span class="op">=</span> os.listdir(<span class="st">'../data/classic/musicnet/train_labels/'</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>label_list[:<span class="dv">3</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>['2422.csv', '2114.csv', '2335.csv']</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>df_list <span class="op">=</span> []</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> label_list:</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    df_list.append(pd.read_csv(<span class="st">'../data/classic/musicnet/train_labels/'</span> <span class="op">+</span> i))</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>label_df <span class="op">=</span> pd.concat(df_list)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>label_df.head(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>start_time</th>
      <th>end_time</th>
      <th>instrument</th>
      <th>note</th>
      <th>start_beat</th>
      <th>end_beat</th>
      <th>note_value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>90078</td>
      <td>124382</td>
      <td>1</td>
      <td>60</td>
      <td>0.5</td>
      <td>0.489583</td>
      <td>Quarter</td>
    </tr>
    <tr>
      <th>1</th>
      <td>124382</td>
      <td>138718</td>
      <td>1</td>
      <td>65</td>
      <td>1.0</td>
      <td>0.489583</td>
      <td>Quarter</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>label_df[<span class="st">'instrument'</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>array([ 1, 43, 41, 61, 71, 72, 74, 69, 42, 44,  7])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(label_df[<span class="st">'note'</span>].unique())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>83</code></pre>
</div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="dv">19233758</span><span class="op">/</span> <span class="bu">len</span>(classic_spec.signal) <span class="op">*</span> <span class="dv">9627</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>9391.849238622863</code></pre>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="dv">19421150</span><span class="op">/</span> <span class="bu">len</span>(classic_spec.signal) <span class="op">*</span> <span class="dv">9627</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>9483.352802956157</code></pre>
</div>
</div>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>classic_spec.sr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>44100</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>classic_spec.spec.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>(256, 9627)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.array([[<span class="st">'a'</span>, <span class="st">'r'</span>], [<span class="st">'b'</span>, <span class="st">'q'</span>], [<span class="st">'c'</span>, <span class="st">'z'</span>]])</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>nb <span class="op">=</span> MultiLabelBinarizer()</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>nb.fit(y)</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>nb.transform(np.array([[<span class="st">'a'</span>, np.nan], [<span class="st">'d'</span>]]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>array([[1, 0, 0, 0, 0, 0],
       [0, 0, 0, 0, 0, 0]])</code></pre>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>meta_df <span class="op">=</span> pd.read_csv(<span class="st">'../data/OrchideaSOL_metadata.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>multioutput_generator <span class="op">=</span> spec_generator_multioutput(meta_df, <span class="dv">32</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a>multioutput_generator.<span class="fu">__getitem__</span>(<span class="dv">2</span>)[<span class="dv">1</span>][<span class="dv">1</span>].shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>KeyError: 1</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>meta_df[<span class="st">'Pitch ID (if applicable)'</span>][meta_df[<span class="st">'Pitch ID (if applicable)'</span>].isna()]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>138     NaN
142     NaN
233     NaN
234     NaN
235     NaN
         ..
13027   NaN
13028   NaN
13029   NaN
13030   NaN
13043   NaN
Name: Pitch ID (if applicable), Length: 103, dtype: float64</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>generator <span class="op">=</span> spec_generator(meta_df, <span class="dv">32</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(generator.indices)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[9012 3451 6714 ... 9387 4120 7367]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>run spec_generator_sequence_multilabel.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>generator</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>&lt;spec_generator_sequence.spec_generator at 0x7f58509d07c0&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>generate_multi <span class="op">=</span> spec_generator_multi(meta_df, <span class="dv">32</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>generate_multi.<span class="fu">__getitem__</span>(<span class="dv">2</span>)[<span class="dv">1</span>].shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>(32, 107)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>generate_multi.</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>SyntaxError: invalid syntax (446800042.py, line 1)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>timeit</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>random_num <span class="op">=</span> random.randint(<span class="dv">1</span>, <span class="dv">50</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>generator.<span class="fu">__getitem__</span>(random_num)[<span class="dv">1</span>][<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>40.6 ms Â± 8.01 ms per loop (mean Â± std. dev. of 7 runs, 10 loops each)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> pd.DataFrame({<span class="st">'test'</span>:[<span class="st">'d'</span>, <span class="st">'z'</span>, <span class="st">'r'</span>, <span class="st">'e'</span>, <span class="st">'y'</span>]})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>test</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>d</td>
    </tr>
    <tr>
      <th>1</th>
      <td>z</td>
    </tr>
    <tr>
      <th>2</th>
      <td>r</td>
    </tr>
    <tr>
      <th>3</th>
      <td>e</td>
    </tr>
    <tr>
      <th>4</th>
      <td>y</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>hot <span class="op">=</span> OneHotEncoder(sparse<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>hot.fit_transform(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>array([[1., 0., 0., 0., 0.],
       [0., 0., 0., 0., 1.],
       [0., 0., 1., 0., 0.],
       [0., 1., 0., 0., 0.],
       [0., 0., 0., 1., 0.]])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>hot.categories_</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>[array(['d', 'e', 'r', 'y', 'z'], dtype=object)]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>(np.random.randint(<span class="dv">0</span>, <span class="dv">2</span>, size<span class="op">=</span><span class="dv">10000</span>) <span class="op">==</span> np.random.randint(<span class="dv">0</span>, <span class="dv">2</span>, size<span class="op">=</span><span class="dv">10000</span>)).mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>0.4947</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>hop_length <span class="op">=</span> <span class="dv">2048</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>win_length <span class="op">=</span> <span class="dv">512</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>n_fft <span class="op">=</span> <span class="dv">1024</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>meta_df[<span class="st">'Path'</span>].sample(<span class="dv">1</span>).values[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>'Brass/Trumpet_C+sordina_wah/flatterzunge_open/TpC+SW-flatt_open-G#3-mf-N-N.wav'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>timeit</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> meta_df[<span class="st">'Path'</span>].sample(<span class="dv">1</span>).values[<span class="dv">0</span>]</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>test <span class="op">=</span> _get_spec(<span class="st">'Winds/Flute/ordinario/Fl-ord-D6-ff-N-T20d.wav'</span>, test_verbose<span class="op">=</span><span class="va">False</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>962 Âµs Â± 37.6 Âµs per loop (mean Â± std. dev. of 7 runs, 1,000 loops each)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>run spectrogram_class.py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>AttributeError: 'spectrogram' object has no attribute 'spec'</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>meta_df.head(<span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Path</th>
      <th>Family (abbr.)</th>
      <th>Family (in full)</th>
      <th>Instrument (abbr.)</th>
      <th>Instrument (in full)</th>
      <th>Technique (abbr.)</th>
      <th>Technique (in full)</th>
      <th>Pitch</th>
      <th>Pitch ID (if applicable)</th>
      <th>Dynamics</th>
      <th>Dynamics ID (if applicable)</th>
      <th>Instance ID</th>
      <th>Mute (abbr.)</th>
      <th>Mute (in full)</th>
      <th>String ID (if applicable)</th>
      <th>Needed digital retuning</th>
      <th>Fold</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Brass/Bass_Tuba+sordina/ordinario/BTb+S-ord-A#...</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>BTb</td>
      <td>Bass Tuba</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>A#0</td>
      <td>22.0</td>
      <td>f</td>
      <td>3.0</td>
      <td>0.0</td>
      <td>S</td>
      <td>Sordina</td>
      <td>NaN</td>
      <td>False</td>
      <td>2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Brass/Bass_Tuba+sordina/ordinario/BTb+S-ord-A#...</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>BTb</td>
      <td>Bass Tuba</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>A#0</td>
      <td>22.0</td>
      <td>p</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>S</td>
      <td>Sordina</td>
      <td>NaN</td>
      <td>True</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>meta_test <span class="op">=</span> meta_df[[<span class="st">'Instrument (in full)'</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>one_hot <span class="op">=</span> OneHotEncoder(sparse<span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>one_hot.fit_transform(meta_test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>array([[0., 0., 1., ..., 0., 0., 0.],
       [0., 0., 1., ..., 0., 0., 0.],
       [0., 0., 1., ..., 0., 0., 0.],
       ...,
       [0., 1., 0., ..., 0., 0., 0.],
       [0., 1., 0., ..., 0., 0., 0.],
       [0., 1., 0., ..., 0., 0., 0.]])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>meta_df[<span class="st">'Path'</span>][<span class="dv">2</span>:<span class="dv">6</span>].values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>array(['Brass/Bass_Tuba+sordina/ordinario/BTb+S-ord-A#1-f-N-T20u.wav',
       'Brass/Bass_Tuba+sordina/ordinario/BTb+S-ord-A#1-p-N-T22u.wav',
       'Brass/Bass_Tuba+sordina/ordinario/BTb+S-ord-A#2-f-N-T29u.wav',
       'Brass/Bass_Tuba+sordina/ordinario/BTb+S-ord-A#2-p-N-T31u.wav'],
      dtype=object)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a>one_hot.categories_</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>[array(['Accordion', 'Alto Saxophone', 'Bass Tuba', 'Bassoon', 'Cello',
        'Clarinet in Bb', 'Contrabass', 'Flute', 'French Horn', 'Guitar',
        'Harp', 'Oboe', 'Trombone', 'Trumpet in C', 'Viola', 'Violin'],
       dtype=object)]</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>meta_freq <span class="op">=</span> <span class="dv">1</span><span class="op">/</span>meta_df.groupby(<span class="st">'Instrument (in full)'</span>)[<span class="st">'Instrument (in full)'</span>].transform(<span class="st">'count'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>meta_freq</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>0        0.002000
1        0.002000
2        0.002000
3        0.002000
4        0.002000
           ...   
13260    0.002653
13261    0.002653
13262    0.002653
13263    0.002653
13264    0.002653
Name: Instrument (in full), Length: 13265, dtype: float64</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="op">%%</span>time</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>meta_df.sample(<span class="dv">32</span>, )</span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>            <span class="co"># replace = True, </span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>            <span class="co"># weights=meta_freq)[['Instrument (in full)']].value_counts(normalize=True)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>CPU times: user 1.75 ms, sys: 0 ns, total: 1.75 ms
Wall time: 1.54 ms</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="11">

<div>

<table class="dataframe table table-sm table-striped">
  <thead>
    <tr>
      <th></th>
      <th>Path</th>
      <th>Family (abbr.)</th>
      <th>Family (in full)</th>
      <th>Instrument (abbr.)</th>
      <th>Instrument (in full)</th>
      <th>Technique (abbr.)</th>
      <th>Technique (in full)</th>
      <th>Pitch</th>
      <th>Pitch ID (if applicable)</th>
      <th>Dynamics</th>
      <th>Dynamics ID (if applicable)</th>
      <th>Instance ID</th>
      <th>Mute (abbr.)</th>
      <th>Mute (in full)</th>
      <th>String ID (if applicable)</th>
      <th>Needed digital retuning</th>
      <th>Fold</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>978</th>
      <td>Brass/Horn/sforzato/Hn-sfz-F#2-f-N-N.wav</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>Hn</td>
      <td>French Horn</td>
      <td>sfz</td>
      <td>sforzato</td>
      <td>F#2</td>
      <td>42.0</td>
      <td>f</td>
      <td>3.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>748</th>
      <td>Brass/Horn/flatterzunge_stopped/Hn-flatt_stopp...</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>Hn</td>
      <td>French Horn</td>
      <td>flatt_stopped</td>
      <td>flatterzunge_stopped</td>
      <td>B3</td>
      <td>59.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>4</td>
    </tr>
    <tr>
      <th>7327</th>
      <td>Strings/Viola/sul_tasto_tremolo/Va-tasto_trem-...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Va</td>
      <td>Viola</td>
      <td>tasto_trem</td>
      <td>sul_tasto_tremolo</td>
      <td>E5</td>
      <td>76.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>1.0</td>
      <td>True</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2757</th>
      <td>Keyboards/Accordion/ordinario/Acc-ord-D#4-mf-a...</td>
      <td>Keyboards</td>
      <td>Keyboards</td>
      <td>Acc</td>
      <td>Accordion</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>D#4</td>
      <td>63.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>4</td>
    </tr>
    <tr>
      <th>3972</th>
      <td>PluckedStrings/Harp/ordinario/Hp-ord-G#4-mf-N-...</td>
      <td>PluckedStrings</td>
      <td>Plucked Strings</td>
      <td>Hp</td>
      <td>Harp</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>G#4</td>
      <td>68.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>4</td>
    </tr>
    <tr>
      <th>7147</th>
      <td>Strings/Viola/sul_ponticello/Va-pont-F#5-mf-3c...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Va</td>
      <td>Viola</td>
      <td>pont</td>
      <td>sul_ponticello</td>
      <td>F#5</td>
      <td>78.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>N</td>
      <td>None</td>
      <td>3.0</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10638</th>
      <td>Strings/Violoncello/pizzicato_secco/Vc-pizz_se...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vc</td>
      <td>Cello</td>
      <td>pizz_sec</td>
      <td>pizzicato_secco</td>
      <td>A3</td>
      <td>57.0</td>
      <td>ff</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>1.0</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>7542</th>
      <td>Strings/Viola/tremolo/Va-trem-D6-mf-1c-T12u.wav</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Va</td>
      <td>Viola</td>
      <td>trem</td>
      <td>tremolo</td>
      <td>D6</td>
      <td>86.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>1.0</td>
      <td>True</td>
      <td>3</td>
    </tr>
    <tr>
      <th>7457</th>
      <td>Strings/Viola/tremolo/Va-trem-C#5-pp-2c-N.wav</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Va</td>
      <td>Viola</td>
      <td>trem</td>
      <td>tremolo</td>
      <td>C#5</td>
      <td>73.0</td>
      <td>pp</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>None</td>
      <td>2.0</td>
      <td>False</td>
      <td>3</td>
    </tr>
    <tr>
      <th>8171</th>
      <td>Strings/Violin/artificial_harmonic/Vn-art_harm...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vn</td>
      <td>Violin</td>
      <td>art_harm</td>
      <td>artificial_harmonic</td>
      <td>B7</td>
      <td>107.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>1.0</td>
      <td>False</td>
      <td>3</td>
    </tr>
    <tr>
      <th>12890</th>
      <td>Winds/Sax_Alto/aeolian/ASax-aeol-A3-p-N-R100u.wav</td>
      <td>Winds</td>
      <td>Woodwinds</td>
      <td>ASax</td>
      <td>Alto Saxophone</td>
      <td>aeol</td>
      <td>aeolian</td>
      <td>A3</td>
      <td>57.0</td>
      <td>p</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>True</td>
      <td>2</td>
    </tr>
    <tr>
      <th>482</th>
      <td>Brass/Bass_Tuba/slap_pitched/BTb-slap-F#1-f-N-...</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>BTb</td>
      <td>Bass Tuba</td>
      <td>slap</td>
      <td>slap_pitched</td>
      <td>F#1</td>
      <td>30.0</td>
      <td>f</td>
      <td>3.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>9260</th>
      <td>Strings/Violin/sul_ponticello/Vn-pont-A3-mf-4c...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vn</td>
      <td>Violin</td>
      <td>pont</td>
      <td>sul_ponticello</td>
      <td>A3</td>
      <td>57.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>N</td>
      <td>None</td>
      <td>4.0</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2346</th>
      <td>Brass/Trumpet_C/slap_pitched/TpC-slap-G#4-p-N-...</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>TpC</td>
      <td>Trumpet in C</td>
      <td>slap</td>
      <td>slap_pitched</td>
      <td>G#4</td>
      <td>68.0</td>
      <td>p</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3475</th>
      <td>PluckedStrings/Guitar/ordinario_high_register/...</td>
      <td>PluckedStrings</td>
      <td>Plucked Strings</td>
      <td>Gtr</td>
      <td>Guitar</td>
      <td>ord_hi_reg</td>
      <td>ordinario_high_register</td>
      <td>D6</td>
      <td>86.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>None</td>
      <td>2.0</td>
      <td>False</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3089</th>
      <td>Keyboards/Accordion/ordinario/Acc-ord-G1-pp-N-...</td>
      <td>Keyboards</td>
      <td>Keyboards</td>
      <td>Acc</td>
      <td>Accordion</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>G1</td>
      <td>31.0</td>
      <td>pp</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8444</th>
      <td>Strings/Violin/ordinario/Vn-ord-B4-mf-4c-N.wav</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vn</td>
      <td>Violin</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>B4</td>
      <td>71.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>N</td>
      <td>None</td>
      <td>4.0</td>
      <td>False</td>
      <td>1</td>
    </tr>
    <tr>
      <th>5873</th>
      <td>Strings/Viola+sordina/ordinario/Va+S-ord-G3-mf...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Va</td>
      <td>Viola</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>G3</td>
      <td>55.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>S</td>
      <td>Sordina</td>
      <td>4.0</td>
      <td>True</td>
      <td>1</td>
    </tr>
    <tr>
      <th>6683</th>
      <td>Strings/Viola/pizzicato_l_vib/Va-pizz_lv-C#4-m...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Va</td>
      <td>Viola</td>
      <td>pizz_lv</td>
      <td>pizzicato_l_vib</td>
      <td>C#4</td>
      <td>61.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>N</td>
      <td>None</td>
      <td>3.0</td>
      <td>False</td>
      <td>2</td>
    </tr>
    <tr>
      <th>9961</th>
      <td>Strings/Violoncello+sordina_piombo/tremolo/Vc+...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vc</td>
      <td>Cello</td>
      <td>trem</td>
      <td>tremolo</td>
      <td>G#4</td>
      <td>68.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>SP</td>
      <td>Piombo</td>
      <td>1.0</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1317</th>
      <td>Brass/Trombone+sordina_wah/flatterzunge_open/T...</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>Tbn</td>
      <td>Trombone</td>
      <td>flatt_open</td>
      <td>flatterzunge_open</td>
      <td>B3</td>
      <td>59.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>SW</td>
      <td>Wah</td>
      <td>NaN</td>
      <td>False</td>
      <td>1</td>
    </tr>
    <tr>
      <th>10597</th>
      <td>Strings/Violoncello/pizzicato_l_vib/Vc-pizz_lv...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vc</td>
      <td>Cello</td>
      <td>pizz_lv</td>
      <td>pizzicato_l_vib</td>
      <td>F2</td>
      <td>41.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>N</td>
      <td>None</td>
      <td>4.0</td>
      <td>False</td>
      <td>3</td>
    </tr>
    <tr>
      <th>715</th>
      <td>Brass/Horn/flatterzunge/Hn-flatt-F3-mf-N-N.wav</td>
      <td>Brass</td>
      <td>Brass</td>
      <td>Hn</td>
      <td>French Horn</td>
      <td>flatt</td>
      <td>flatterzunge</td>
      <td>F3</td>
      <td>53.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>2</td>
    </tr>
    <tr>
      <th>6528</th>
      <td>Strings/Viola/ordinario/Va-ord-G#3-pp-4c-T18u.wav</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Va</td>
      <td>Viola</td>
      <td>ord</td>
      <td>ordinario</td>
      <td>G#3</td>
      <td>56.0</td>
      <td>pp</td>
      <td>0.0</td>
      <td>3.0</td>
      <td>N</td>
      <td>None</td>
      <td>4.0</td>
      <td>True</td>
      <td>2</td>
    </tr>
    <tr>
      <th>5542</th>
      <td>Strings/Contrabass/tremolo/Cb-trem-B3-pp-1c-T1...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Cb</td>
      <td>Contrabass</td>
      <td>trem</td>
      <td>tremolo</td>
      <td>B3</td>
      <td>59.0</td>
      <td>pp</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>1.0</td>
      <td>True</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11158</th>
      <td>Strings/Violoncello/tremolo/Vc-trem-D4-pp-2c-N...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vc</td>
      <td>Cello</td>
      <td>trem</td>
      <td>tremolo</td>
      <td>D4</td>
      <td>62.0</td>
      <td>pp</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>None</td>
      <td>2.0</td>
      <td>False</td>
      <td>4</td>
    </tr>
    <tr>
      <th>4033</th>
      <td>PluckedStrings/Harp/pizzicato_bartok/Hp-pizz_b...</td>
      <td>PluckedStrings</td>
      <td>Plucked Strings</td>
      <td>Hp</td>
      <td>Harp</td>
      <td>pizz_bartok</td>
      <td>pizzicato_bartok</td>
      <td>D#2</td>
      <td>39.0</td>
      <td>ff</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>True</td>
      <td>0</td>
    </tr>
    <tr>
      <th>10073</th>
      <td>Strings/Violoncello/col_legno_battuto/Vc-legno...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vc</td>
      <td>Cello</td>
      <td>legno_batt</td>
      <td>col_legno_battuto</td>
      <td>C#2</td>
      <td>37.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>N</td>
      <td>None</td>
      <td>4.0</td>
      <td>False</td>
      <td>2</td>
    </tr>
    <tr>
      <th>12233</th>
      <td>Winds/Flute/flatterzunge/Fl-flatt-D#6-ff-N-N.wav</td>
      <td>Winds</td>
      <td>Woodwinds</td>
      <td>Fl</td>
      <td>Flute</td>
      <td>flatt</td>
      <td>flatterzunge</td>
      <td>D#6</td>
      <td>87.0</td>
      <td>ff</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>1</td>
    </tr>
    <tr>
      <th>11602</th>
      <td>Winds/Bassoon/vibrato/Bn-vib-G#3-mf-N-N.wav</td>
      <td>Winds</td>
      <td>Woodwinds</td>
      <td>Bn</td>
      <td>Bassoon</td>
      <td>vib</td>
      <td>vibrato</td>
      <td>G#3</td>
      <td>56.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>NaN</td>
      <td>False</td>
      <td>2</td>
    </tr>
    <tr>
      <th>10654</th>
      <td>Strings/Violoncello/pizzicato_secco/Vc-pizz_se...</td>
      <td>Strings</td>
      <td>Violin Family</td>
      <td>Vc</td>
      <td>Cello</td>
      <td>pizz_sec</td>
      <td>pizzicato_secco</td>
      <td>B4</td>
      <td>71.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>N</td>
      <td>None</td>
      <td>1.0</td>
      <td>False</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3546</th>
      <td>PluckedStrings/Guitar/sul_ponticello/Gtr-pont-...</td>
      <td>PluckedStrings</td>
      <td>Plucked Strings</td>
      <td>Gtr</td>
      <td>Guitar</td>
      <td>pont</td>
      <td>sul_ponticello</td>
      <td>C4</td>
      <td>60.0</td>
      <td>mf</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>N</td>
      <td>None</td>
      <td>2.0</td>
      <td>False</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>meta_df.sample(<span class="dv">1</span>)[<span class="st">'Path'</span>].values[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>'Strings/Viola/ordinario/Va-ord-A4-ff-3c-R100d.wav'</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>test_spec <span class="op">=</span> spectrogram(meta_df.sample(<span class="dv">1</span>)[<span class="st">'Path'</span>].values[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a>test_spec.plot_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-78-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>test, _ <span class="op">=</span> librosa.load(<span class="st">'../data/_OrchideaSOL2020_release/OrchideaSOL2020/PluckedStrings/Harp/pizzicato_bartok/Hp-pizz_bartok-G3-ff-N-N.wav'</span>, </span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>                    sr <span class="op">=</span> <span class="va">None</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>test.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>(826215,)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mask_spec(arr, inplace <span class="op">=</span> <span class="va">False</span>):</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>    loop <span class="op">=</span> random.randint(<span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>    tmp <span class="op">=</span> arr.copy()</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(loop):</span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>        start <span class="op">=</span> random.randint(<span class="dv">0</span>, arr.shape[<span class="dv">1</span>])</span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>        duration <span class="op">=</span> random.randint(<span class="dv">25</span>, <span class="dv">60</span>)</span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> inplace <span class="op">==</span> <span class="va">True</span>:</span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>            arr[:, start:start <span class="op">+</span> duration] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>            tmp[:, start:start<span class="op">+</span>duration] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>    freq_loop <span class="op">=</span> random.randint(<span class="dv">1</span>, <span class="dv">3</span>)</span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> freq <span class="kw">in</span> <span class="bu">range</span>(freq_loop):</span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a>        start <span class="op">=</span> random.randint(<span class="dv">0</span>, arr.shape[<span class="dv">0</span>])</span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a>        duration <span class="op">=</span> random.randint(<span class="dv">25</span>, <span class="dv">60</span>)</span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> inplace <span class="op">==</span> <span class="va">True</span>:</span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a>            arr[start:start <span class="op">+</span> duration, :] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span>:</span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a>            tmp[start:start <span class="op">+</span> duration, :] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="va">None</span> <span class="cf">if</span> inplace <span class="op">==</span> <span class="va">True</span> <span class="cf">else</span> tmp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co"># librosa.display.specshow(librosa.amplitude_to_db(mask_spec(spec_sample)), y_axis='log', x_axis = 's')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> random</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(random.randint(<span class="dv">0</span>, <span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>9</code></pre>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>meta_df[<span class="st">'_ins'</span>] <span class="op">=</span> meta_df[<span class="st">'Instrument (in full)'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(random.randint.__doc__)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Return random integer in range [a, b], including both end points.
        </code></pre>
</div>
</div>
<div class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a>test, _ <span class="op">=</span> <span class="bu">next</span>(gen(meta_df, test_verbose <span class="op">=</span> <span class="va">True</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>HIT
SUCCESS</code></pre>
</div>
</div>
<div class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[[0.]
  [0.]
  [0.]
  ...
  [0.]
  [0.]
  [0.]]

 [[0.]
  [0.]
  [0.]
  ...
  [0.]
  [0.]
  [0.]]

 [[0.]
  [0.]
  [0.]
  ...
  [0.]
  [0.]
  [0.]]

 ...

 [[0.]
  [0.]
  [0.]
  ...
  [0.]
  [0.]
  [0.]]

 [[0.]
  [0.]
  [0.]
  ...
  [0.]
  [0.]
  [0.]]

 [[0.]
  [0.]
  [0.]
  ...
  [0.]
  [0.]
  [0.]]]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a>np.load(<span class="st">'/home/shiya/Documents/Music_transcription_fastai/data/_OrchideaSOL2020_release/OrchideaSOL2020/Strings/Violin/ordinario/Vn-ord-A3-ff-4c-N.npy'</span>, </span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a>            allow_pickle<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>FileNotFoundError: [Errno 2] No such file or directory: '/home/shiya/Documents/Music_transcription_fastai/data/_OrchideaSOL2020_release/OrchideaSOL2020/Strings/Violin/ordinario/Vn-ord-A3-ff-4c-N.npy'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="dv">0</span> <span class="kw">in</span> test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>True</code></pre>
</div>
</div>
<div class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb140"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test.shape)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(256, 500, 1)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb142"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a>librosa.display.specshow(librosa.amplitude_to_db(np.reshape(test, newshape <span class="op">=</span> test.shape[:<span class="dv">2</span>])), x_axis <span class="op">=</span> <span class="st">'s'</span>, </span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a>                                                y_axis <span class="op">=</span> <span class="st">'mel'</span>, sr<span class="op">=</span><span class="dv">44100</span>, hop_length<span class="op">=</span><span class="dv">2048</span>, </span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>                                                n_fft<span class="op">=</span><span class="dv">2048</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>&lt;matplotlib.collections.QuadMesh at 0x7f7700c99760&gt;</code></pre>
</div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-91-output-2.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb144"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>sample <span class="op">=</span> meta_df.sample(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>sample[<span class="st">'Path'</span>].values</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>array(['Strings/Violoncello+sordina_piombo/ordinario/Vc+SP-ord-D3-mf-2c-N.wav'],
      dtype=object)</code></pre>
</div>
</div>
<div class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>spec <span class="op">=</span> spectrogram(sample[<span class="st">'Path'</span>].values[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>AttributeError: 'spectrogram' object has no attribute 'spec'</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>sample[<span class="st">'Path'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>8462    Strings/Violin/ordinario/Vn-ord-C#4-pp-4c-N.wav
Name: Path, dtype: object</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>np.save(<span class="st">'testnig.npy'</span>, spec.spec)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>ls</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>/bin/bash: /home/shiya/anaconda3/envs/music/lib/libtinfo.so.6: no version information available (required by /bin/bash)
__init__.py          spectrogram_class.py
model.png            spectrogram.py
music_transcription_2conv.ipynb  test.ipynb
music_transcription_class.ipynb  testnig.npy
music_transcription.ipynb    wav_converter_class.py
__pycache__          wav_converter.py
spec_input_generator.py</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a>load_test <span class="op">=</span> np.load(<span class="st">'testnig.npy'</span>, allow_pickle <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>load_test</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="32">
<pre><code>array([[0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       ...,
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.],
       [0., 0., 0., ..., 0., 0., 0.]])</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>load_test.shape</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>()</code></pre>
</div>
</div>
<div class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>sample_path <span class="op">=</span> meta_df.sample(<span class="dv">1</span>)[<span class="st">'Path'</span>].values[<span class="dv">0</span>]</span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a>sample_path</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="48">
<pre><code>'Strings/Violin/ordinario/Vn-ord-A4-ff-2c-N.wav'</code></pre>
</div>
</div>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a>test_sample <span class="op">=</span> spectrogram(sample_path, </span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a>                preprocess <span class="op">=</span> <span class="va">False</span>, trunc_off <span class="op">=</span> <span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>test_sample.plot_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-103-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>test_sample.add_noise()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>test_sample.generate_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>test_sample.plot_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-106-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>test_sample.mask_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="55">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>test_sample.plot_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-108-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>test_sample.shift_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a>test_sample.plot_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="test_files/figure-html/cell-110-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>testtest.plot_spec()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>NameError: name 'testtest' is not defined</code></pre>
</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>